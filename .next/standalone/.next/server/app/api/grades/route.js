"use strict";(()=>{var e={};e.id=491,e.ids=[491],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2525:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>x,patchFetch:()=>f,requestAsyncStorage:()=>h,routeModule:()=>g,serverHooks:()=>v,staticGenerationAsyncStorage:()=>m});var r={};a.r(r),a.d(r,{GET:()=>l,POST:()=>p,PUT:()=>c,runtime:()=>u});var s=a(3278),o=a(5002),n=a(4877),d=a(1309),i=a(2097);let u="nodejs";async function l(e){try{let{searchParams:t}=new URL(e.url),a=t.get("studentId"),r=t.get("classId"),s=[];return s=a?await i.hY.getStudentGrades(a):r?await i.hY.getClassGrades(r):await i.hY.getAllGrades(),d.NextResponse.json({grades:s})}catch(e){return console.error("Failed to fetch grades:",e),d.NextResponse.json({error:"Failed to fetch grades"},{status:500})}}async function p(e){try{let{studentId:t,subject:a,firstCA:r,secondCA:s,assignment:o,exam:n,remarks:u,teacherId:l}=await e.json(),p=(r||0)+(s||0)+(o||0),c=p+(n||0),g="F";c>=75?g="A":c>=60?g="B":c>=50?g="C":c>=40?g="D":c>=30&&(g="E");let h={studentId:t,subject:a,firstCA:r,secondCA:s,assignment:o,caTotal:p,exam:n,total:c,grade:g,remarks:u,teacherId:l,updatedAt:new Date().toISOString()},m=await i.hY.saveGrade(h);return d.NextResponse.json({grade:m,message:"Grade saved successfully"})}catch(e){return console.error("Failed to save grade:",e),d.NextResponse.json({error:"Failed to save grade"},{status:500})}}async function c(e){try{let{id:t,...a}=await e.json();if(void 0!==a.firstCA||void 0!==a.secondCA||void 0!==a.assignment){let e=(a.firstCA||0)+(a.secondCA||0)+(a.assignment||0);if(a.caTotal=e,void 0!==a.exam){a.total=e+a.exam;let t="F";a.total>=75?t="A":a.total>=60?t="B":a.total>=50?t="C":a.total>=40?t="D":a.total>=30&&(t="E"),a.grade=t}}a.updatedAt=new Date().toISOString();let r=await i.hY.updateGrade(t,a);return d.NextResponse.json({message:"Grade updated successfully",data:r})}catch(e){return console.error("Failed to update grade:",e),d.NextResponse.json({error:"Failed to update grade"},{status:500})}}let g=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/grades/route",pathname:"/api/grades",filename:"route",bundlePath:"app/api/grades/route"},resolvedPagePath:"C:\\Users\\User\\Documents\\VEA\\VEA PROJECT\\vea-2025-portal\\app\\api\\grades\\route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:h,staticGenerationAsyncStorage:m,serverHooks:v}=g,x="/api/grades/route";function f(){return(0,n.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:m})}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[787,833,97],()=>a(2525));module.exports=r})();